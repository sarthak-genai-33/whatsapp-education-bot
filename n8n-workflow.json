{
  "name": "WhatsApp Education Bot Workflow",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "n8n-whatsapp-webhook",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "WhatsApp Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        240,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "greeting-condition",
              "leftValue": "={{ $json.Body?.toLowerCase() }}",
              "rightValue": "hi,hello,hey,start,menu",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "message-router",
      "name": "Message Router",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        460,
        300
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "faq-condition",
              "leftValue": "={{ $json.Body?.toLowerCase() }}",
              "rightValue": "courses,fees,admission,results,schedule,library,hostel,transport",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "faq-checker",
      "name": "FAQ Checker",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        680,
        400
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "resources-condition",
              "leftValue": "={{ $json.Body?.toLowerCase() }}",
              "rightValue": "resources,materials,study,syllabus,notes,lectures,ebooks",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "resources-checker",
      "name": "Resources Checker",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        680,
        600
      ]
    },
    {
      "parameters": {
        "jsCode": "// Main Menu Response\nconst mainMenu = `ğŸ“ Welcome to Student Support Bot!\nYour one-stop solution for academic information.\n\nğŸ“š *What can I help you with?*\n\nğŸ”¹ *FAQs:* courses, fees, admission, results, schedule\nğŸ”¹ *Resources:* syllabus, notes, lectures, ebooks\nğŸ”¹ *Updates:* timetable, reminders, assignments\nğŸ”¹ *Facilities:* library, hostel, transport\n\nğŸ’¡ *Quick Commands:*\nâ€¢ Type any keyword (e.g., 'courses', 'fees', 'notes')\nâ€¢ Type 'resources' for academic materials\nâ€¢ Type 'updates' for personalized information\nâ€¢ Type 'help' for support\nâ€¢ Type 'menu' to see this again`;\n\nreturn [{\n  json: {\n    message: mainMenu,\n    messageType: 'menu',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "main-menu-generator",
      "name": "Main Menu Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        680,
        200
      ]
    },
    {
      "parameters": {
        "jsCode": "// FAQ Response Generator\nconst message = $input.first().json.Body?.toLowerCase();\n\nconst faqData = {\n  \"courses\": \"ğŸ“š *Available Courses:*\\nâ€¢ MBA (2 years) - Management Studies\\nâ€¢ BCA (3 years) - Computer Applications\\nâ€¢ BBA (3 years) - Business Administration\\nâ€¢ M.Tech (2 years) - Engineering Specializations\\nğŸ“§ Details: courses@example.com\",\n  \"fees\": \"ğŸ’° *Fee Structure:*\\nâ€¢ MBA: â‚¹2,50,000 per year\\nâ€¢ BCA: â‚¹80,000 per year\\nâ€¢ BBA: â‚¹90,000 per year\\nâ€¢ M.Tech: â‚¹1,20,000 per year\\nğŸ“§ Finance office: fees@example.com\",\n  \"admission\": \"ğŸ“ *Admission Process:*\\nâ€¢ Application: Online portal\\nâ€¢ Entrance Test: Subject-specific\\nâ€¢ Interview: Final selection\\nâ€¢ Documents: Academic transcripts required\\nğŸ“§ Admissions: admissions@example.com\",\n  \"results\": \"ğŸ“Š *Results Information:*\\nâ€¢ Semester results: Published online\\nâ€¢ Grade sheets: Available for download\\nâ€¢ Transcripts: Apply through student portal\\nğŸ“§ Academics: results@example.com\",\n  \"schedule\": \"ğŸ“… *Academic Schedule:*\\nâ€¢ Classes: 9 AM - 4 PM (Mon-Fri)\\nâ€¢ Exams: End of each semester\\nâ€¢ Holidays: As per academic calendar\\nğŸ“§ Schedule queries: schedule@example.com\",\n  \"library\": \"ğŸ“š *Library Services:*\\nâ€¢ Hours: Mon-Fri 8AM-8PM, Sat 9AM-5PM\\nâ€¢ Books: 50,000+ collection\\nâ€¢ Digital resources: E-books & journals\\nğŸ“§ Library: library@example.com\",\n  \"hostel\": \"ğŸ  *Hostel Facilities:*\\nâ€¢ AC/Non-AC rooms available\\nâ€¢ Mess facility included\\nâ€¢ Wi-Fi & study rooms\\nğŸ“§ Hostel: hostel@example.com\",\n  \"transport\": \"ğŸšŒ *Transport Services:*\\nâ€¢ College bus from major locations\\nâ€¢ Route timings: 7 AM - 6 PM\\nâ€¢ Monthly pass available\\nğŸ“§ Transport: transport@example.com\"\n};\n\nlet response = \"\";\nfor (const [key, value] of Object.entries(faqData)) {\n  if (message.includes(key)) {\n    response = value;\n    break;\n  }\n}\n\nif (!response) {\n  response = \"ğŸ¤” I didn't find specific FAQ information for that query. Type 'menu' for available options.\";\n}\n\nreturn [{\n  json: {\n    message: response,\n    messageType: 'faq',\n    category: message,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "faq-generator",
      "name": "FAQ Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        350
      ]
    },
    {
      "parameters": {
        "jsCode": "// Academic Resources Response Generator\nconst message = $input.first().json.Body?.toLowerCase();\n\nconst academicResources = {\n  \"syllabus\": \"ğŸ“– *Syllabus & Course Materials:*\\nâ€¢ Complete syllabus for all courses\\nâ€¢ Unit-wise breakdown available\\nâ€¢ Learning objectives included\\nğŸ”— Download: https://example.com/syllabus\",\n  \"notes\": \"ğŸ“ *Study Notes:*\\nâ€¢ Chapter-wise notes\\nâ€¢ Faculty-prepared materials\\nâ€¢ Previous year papers\\nğŸ”— Access: https://example.com/notes\",\n  \"lectures\": \"ğŸ¥ *Recorded Lectures:*\\nâ€¢ Video lectures by faculty\\nâ€¢ Subject-wise categorization\\nâ€¢ HD quality recordings\\nğŸ”— Portal: https://example.com/lectures\",\n  \"ebooks\": \"ğŸ“± *E-Books & Resources:*\\nâ€¢ Digital library access\\nâ€¢ Reference books\\nâ€¢ Research journals\\nğŸ”— Library: https://example.com/ebooks\"\n};\n\nlet response = \"\";\n\n// Check if specific resource is requested\nfor (const [key, value] of Object.entries(academicResources)) {\n  if (message.includes(key)) {\n    response = value;\n    break;\n  }\n}\n\n// If no specific resource, show general resources menu\nif (!response && (message.includes('resources') || message.includes('materials') || message.includes('study'))) {\n  response = \"ğŸ“š *Academic Resources*\\n\\nWhat type of resource do you need?\\n\\nğŸ”¹ Type 'syllabus' - Course syllabus & materials\\nğŸ”¹ Type 'notes' - Study notes & papers\\nğŸ”¹ Type 'lectures' - Recorded video lectures\\nğŸ”¹ Type 'ebooks' - Digital books & journals\\n\\nğŸ’¡ Or directly type the resource name!\";\n}\n\nif (!response) {\n  response = \"ğŸ¤” I didn't find specific resource information. Type 'resources' to see available academic materials.\";\n}\n\nreturn [{\n  json: {\n    message: response,\n    messageType: 'resources',\n    category: message,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "resources-generator",
      "name": "Resources Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        550
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "updates-condition",
              "leftValue": "={{ $json.Body?.toLowerCase() }}",
              "rightValue": "updates,personal,my,timetable,reminders,assignments",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "updates-checker",
      "name": "Updates Checker",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        680,
        800
      ]
    },
    {
      "parameters": {
        "jsCode": "// Personalized Updates Generator\nconst message = $input.first().json.Body?.toLowerCase();\n\nconst studentUpdates = {\n  \"timetable\": \"ğŸ“… *This Week's Exam Timetable:*\\nâ€¢ Monday: Mathematics (9 AM - 12 PM)\\nâ€¢ Wednesday: Science (2 PM - 5 PM)\\nâ€¢ Friday: English (10 AM - 1 PM)\\nğŸ“ Venue: Main Examination Hall\",\n  \"reminders\": \"ğŸ”” *Class Reminders:*\\nâ€¢ Tomorrow: Advanced Programming Lab\\nâ€¢ Thursday: Marketing Strategy Seminar\\nâ€¢ Friday: Project Submission Deadline\\nâ° Don't forget to attend!\",\n  \"assignments\": \"ğŸ“‹ *Assignment Deadlines:*\\nâ€¢ Data Structures Assignment: 25th Aug\\nâ€¢ Marketing Case Study: 28th Aug\\nâ€¢ Research Paper: 30th Aug\\nğŸ“§ Submit via student portal\"\n};\n\nlet response = \"\";\n\n// Check if specific update is requested\nfor (const [key, value] of Object.entries(studentUpdates)) {\n  if (message.includes(key)) {\n    response = value;\n    break;\n  }\n}\n\n// If no specific update, show general updates menu\nif (!response && (message.includes('updates') || message.includes('personal') || message.includes('my'))) {\n  response = \"ğŸ“… *Personalized Updates*\\n\\nWhat updates would you like to see?\\n\\nğŸ”¹ Type 'timetable' - This week's exam schedule\\nğŸ”¹ Type 'reminders' - Class & event reminders\\nğŸ”¹ Type 'assignments' - Assignment deadlines\\n\\nğŸ’¡ Stay updated with your academic schedule!\";\n}\n\nif (!response) {\n  response = \"ğŸ¤” I didn't find specific update information. Type 'updates' to see available personalized information.\";\n}\n\nreturn [{\n  json: {\n    message: response,\n    messageType: 'updates',\n    category: message,\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "updates-generator",
      "name": "Updates Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        750
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "support-condition",
              "leftValue": "={{ $json.Body?.toLowerCase() }}",
              "rightValue": "contact,support,help,helpline",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "or"
        },
        "options": {}
      },
      "id": "support-checker",
      "name": "Support Checker",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        680,
        1000
      ]
    },
    {
      "parameters": {
        "jsCode": "// Support Contact Generator\nconst supportMessage = `ğŸ“ *Student Support Contact*\n\nğŸ“ *Academic Support:*\nğŸ“§ academic-support@example.com\nğŸ“ +91-9876543210\n\nğŸ’» *Technical Support:*\nğŸ“§ tech-support@example.com\nğŸ“ +91-9876543211\n\nğŸ“š *Library Support:*\nğŸ“§ library@example.com\nğŸ“ +91-9876543212\n\nğŸ•’ *Office Hours:* Mon-Fri 9AM-6PM`;\n\nreturn [{\n  json: {\n    message: supportMessage,\n    messageType: 'support',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "support-generator",
      "name": "Support Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        950
      ]
    },
    {
      "parameters": {
        "jsCode": "// Fallback Response Generator\nconst fallbackMessage = `ğŸ¤” I didn't quite understand that.\n\nğŸ“‹ *Try these commands:*\nâ€¢ Type 'menu' for main options\nâ€¢ Type 'courses' for course information\nâ€¢ Type 'fees' for fee structure\nâ€¢ Type 'resources' for study materials\nâ€¢ Type 'updates' for personalized info\nâ€¢ Type 'help' for support\n\nğŸ’¡ *Quick tip:* Use keywords like 'library', 'hostel', 'notes', etc.`;\n\nreturn [{\n  json: {\n    message: fallbackMessage,\n    messageType: 'fallback',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "fallback-generator",
      "name": "Fallback Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        900,
        1150
      ]
    },
    {
      "parameters": {
        "jsCode": "// Twilio TwiML Response Generator\nconst message = $json.message || 'Hello from Student Support Bot!';\n\n// Generate TwiML response compatible with Twilio\nconst twimlResponse = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Response>\n  <Message>${message}</Message>\n</Response>`;\n\nreturn [{\n  json: {\n    twimlResponse,\n    message,\n    contentType: 'application/xml',\n    timestamp: new Date().toISOString()\n  }\n}];"
      },
      "id": "twilio-response-generator",
      "name": "Twilio TwiML Generator",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1120,
        600
      ]
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.twimlResponse }}",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/xml"
              }
            ]
          }
        }
      },
      "id": "webhook-response",
      "name": "Webhook Response",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        1560,
        600
      ]
    },
    {
      "parameters": {
        "jsCode": "// Message Analytics and Logging\nconst incomingData = $input.first().json;\nconst messageBody = incomingData.Body?.toLowerCase() || '';\nconst fromNumber = incomingData.From || '';\nconst timestamp = new Date().toISOString();\n\n// Determine message category\nlet category = 'unknown';\nif (['hi', 'hello', 'hey', 'start', 'menu'].some(greet => messageBody.includes(greet))) {\n  category = 'greeting';\n} else if (['courses', 'fees', 'admission', 'results', 'schedule', 'library', 'hostel', 'transport'].some(faq => messageBody.includes(faq))) {\n  category = 'faq';\n} else if (['resources', 'materials', 'study', 'syllabus', 'notes', 'lectures', 'ebooks'].some(res => messageBody.includes(res))) {\n  category = 'resources';\n} else if (['updates', 'personal', 'my', 'timetable', 'reminders', 'assignments'].some(upd => messageBody.includes(upd))) {\n  category = 'updates';\n} else if (['contact', 'support', 'help', 'helpline'].some(sup => messageBody.includes(sup))) {\n  category = 'support';\n}\n\n// Log analytics data\nconst analyticsData = {\n  timestamp,\n  fromNumber,\n  messageBody,\n  category,\n  messageLength: messageBody.length,\n  sessionId: `${fromNumber}-${new Date().toDateString()}`\n};\n\nconsole.log('WhatsApp Bot Analytics:', JSON.stringify(analyticsData, null, 2));\n\nreturn [{\n  json: {\n    ...incomingData,\n    analytics: analyticsData\n  }\n}];"
      },
      "id": "analytics-logger",
      "name": "Analytics Logger",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        240,
        500
      ]
    }
  ],
  "connections": {
    "webhook-trigger": {
      "main": [
        [
          {
            "node": "analytics-logger",
            "type": "main",
            "index": 0
          },
          {
            "node": "message-router",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "message-router": {
      "main": [
        [
          {
            "node": "main-menu-generator",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "faq-checker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "faq-checker": {
      "main": [
        [
          {
            "node": "faq-generator",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "resources-checker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "resources-checker": {
      "main": [
        [
          {
            "node": "resources-generator",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "updates-checker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updates-checker": {
      "main": [
        [
          {
            "node": "updates-generator",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "support-checker",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "support-checker": {
      "main": [
        [
          {
            "node": "support-generator",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "fallback-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "main-menu-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "faq-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "resources-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updates-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "support-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "fallback-generator": {
      "main": [
        [
          {
            "node": "twilio-response-generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "twilio-response-generator": {
      "main": [
        [
          {
            "node": "webhook-response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-08-25T00:00:00.000Z",
  "versionId": "1"
}